# 分離融合データサイエンス I

## 1.	平均、標準偏差
### 1.1. 平均

平均の式はよく知られています。
平均はすべてのデータの値の合計を、データの個数で割って得られます。
では平均はどのようなときにどうやって役立つでしょうか。

例えばカラオケの曲の長さの平均を考えてみましょう。
平均は何かに役立つでしょうか。
たとえば5人で2曲ずつ歌うなら、おそらく所要時間は平均時間の10倍に近くなるでしょう。
または2時間いるなら、何曲歌えるかという概算にも使えます。
災害や戦争などで難民が生じて、食料を送る場合、ひとりあたりに平均的に必要な食事の量を求めて、人数分の食料を用意すれば、大体全員に足りることになります。

平均ではうまくいかない場合あることに注意しましょう。
もし個別に食事が先に分配されて、一人ずつに配られるなら、余った人は捨てるしかなく、足りない人は必要な食事に足りません。
平均をもとに食料を用意したのではまったく足りないことになります。

この場合に全員が十分な量の食事をするには、平均ではなく一人当たり最大の食事量×人数とする必要があります。

平均の食事の量では、半分ぐらいの人がそれでは足りない。
平均よりも少し多めにする必要があります。

### 1.2. 標準偏差

どの程度平均の量よりも多くすべきかを考えるには、標準偏差が役立ちます。
統計学では標準偏差をσ(シグマ)と呼びます。

平均+σなら85%の人にとって十分となります。
平均+2σなら97.5%。
平均+3σなら99.5%にとって十分です。
100人中99人は満足しますから、もし足りないという人がいればその人だけ余りそうな人から分配するなどすればなんとかなりそうです。

このように平均、標準偏差はことなる数値であるだけでなく、それぞれに用途が異なります。
同じようにmedian、最大値、最小値、代表値といった値を統計ではよく使いますがそれぞれよく意味を理解して目的に応じて利用できる必要があります。

例えば標準偏差を上回る人は何パーセントぐらいだ、と予測しましたが、これは分布が正規分布をしている場合に言えることであり、正規分布でなければ成立しません。

正規分布を仮定して失敗した残念な例としては津波の高さの予想があります。
単純に正規分布としたわけではもちろんありませんが、基本的には津波の分布を正規分布的なモデルで考え、ある高さよりも高い津波の確率は非常に小さい、としたために、本来堤防を超えるはずがなかった津波が堤防を越えてしまった。

しかしながら、充分なデータがあり、正規分布が仮定できれば、平均値や正規分布を利用することは非常に役に立ちます。

例えば今使ってるコンピューターの半導体はほとんど動作をしませんが、まれに放射線があたると誤動作し、これをソフトエラーと呼びます。
ソフトエラーは主に中性子線でおきますが、そのエネルギーとエラー発生率がわかっています。

### 1.3. 標本分散,  不偏分散

母集団の分散は,


$$ S^2 = \frac{1}{n} \sum_{i=1}^n (x_i - \overline{x})^2 $$

で求めるのに対し、標本から分散 s を求める場合以下の不偏分散の式を使います。

$$ 
s^2 = \frac{1}{n-1} \sum_{i=1}^n (x_i - \overline{x})^2
$$

これはなぜか。

標本に対し分散 S^2 の期待値は母集団の分散と一致しません。 (n-1)/n だけずれます。

そこで標本の分散を母集団の分散と一致させるには n/(n-1) 倍すればよいことになるので s^2 = n/(n-1) S^2 としているわけです。

s^2 を不偏分散,  s を不偏標準偏差、と呼びます。

面倒なので単に、分散、標準偏差、といってこの式を使うこともあるのでそれは文脈で判断する必要があります。


### 1.3. 参考

[中性子による「半導体ソフトエラー発生率」の全貌解明は、地球上から宇宙まで、すべてのデジタルデバイスを守る鍵となる| 地球の未来を宇宙から考えるメディア Beyond Our Planet (rd.ntt)](https://www.rd.ntt/se/media/article/0085.html)
こうした数値から、パソコンやスパコンのエラー発生率を求めるには、平均値は標準偏差などの統計は非常に役立つわけです。

平均値と標準偏差といった基本的な統計量でも、正しく理解することは非常に役立ちます。
薬による副作用の発生率、生命保険と生命表の関係、自動車事故を防ぐための対策、地震に備えてどのような対策をすべきか、こうしたことがより正確に行えます。

計算自体が簡単であるから、ということで油断は禁物です。
その意味と性質、何にどう使えるかをしっかり理解しておくことが、データサイエンスの勉強をこれから行っていく上で非常に重要です

### 1.4. 練習問題

練習問題として以下のようなことを考えてみましょう。

1. つなみの大きさが正規分布から外れたのはなぜでしょう？
1. コンピューターの部品のエラーの発生率が正規分布で表せるのはなぜでしょう？
1. もし表せない場合があるとするとどんな場合でしょう？
1. 吉祥寺駅から大学へのまあその所要時間はおそらく正規分布にかなり近いと思いますが、それはなぜでしょう？
1. そこから大きく外れることがあるとすればどういう場合でしょうか
1. 大学のセンター試験の特典は非常にきれいな正規分布していますが、それはなぜでしょう？
1. これは試験の成績が正確であることを意味しているでしょうか
1. 日本人の所得は正規分布でしょうか？
1. 所得が平均所得の人は、だいたい百人中所得の順位で何番目ぐらいになるでしょうか。


# 2.	棒グラフ
データの分布を可視化するために、棒グラフ、折れ線グラフを用います。

R言語では非常に豊富な関数でさまざまなグラフを書くことができます。
しかしこれらのグラフを書くコマンドをすべて覚えておくのは大変ですし、そんなに重要ではありません。

特定のグラフが必要になることはまれです。
必要になった時には覚えていないでしょう。

ならどうすればいいかというと、もしグラフの名前だけでも憶えていれば、AIに質問すればRのプログラムも作ってくれます。

しかしグラフから何を読み取りたいかを決めるのは皆さん自身です。
なんでもいいのでグラフにしてほしい、とAIに頼んでも、求める視覚化ができません。
したがってグラフの関数名を覚えるのではなく、どんな目的にどんなグラフが向いているかということをしっかりいろんなグラフを描きながら考えて理解してください。

練習問題

1. 今円とドルの相場が激しく動いていますねその様子を理解するにはどんなグラフを描けばいいでしょうか棒グラフでしょうか折れ線グラフでしょうか
1. さまざまな業種や職種の就職率や就職した人数をグラフ化するとしたらどんなグラフが良いでしょうか
1. 皆さんの一日に過ごすさまざまなことに費やす時間を分析するためにグラフ化するとしたらどんなグラフが良いでしょうか

